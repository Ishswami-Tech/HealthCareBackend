# ============================================================================
# PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
# Overrides .env for production environment
# REQUIRED: DATABASE_URL and JWT_SECRET must be set
# ============================================================================

NODE_ENV=production
IS_DEV=false

# Database Configuration (REQUIRED - must be set)
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/userdb?schema=public
DIRECT_URL=postgresql://postgres:postgres@postgres:5432/userdb?schema=public

# Database Security Configuration (strict for production)
DATABASE_SQL_INJECTION_PREVENTION_ENABLED=true
DATABASE_ROW_LEVEL_SECURITY_ENABLED=true
DATABASE_DATA_MASKING_ENABLED=true
DATABASE_RATE_LIMITING_ENABLED=true
DATABASE_READ_REPLICAS_ENABLED=false
DATABASE_READ_REPLICAS_STRATEGY=round-robin
DATABASE_READ_REPLICAS_URLS=

# Cache Configuration
CACHE_ENABLED=true
CACHE_PROVIDER=dragonfly

# Dragonfly Configuration (Docker service name)
DRAGONFLY_HOST=dragonfly
DRAGONFLY_PORT=6379
DRAGONFLY_KEY_PREFIX=healthcare:

# Redis Configuration (for Redis provider)
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_TTL=7200
REDIS_PREFIX=healthcare:
REDIS_ENABLED=true

# Application Configuration
PORT=8088
API_PREFIX=/api/v1
HOST=api.ishswami.in
BIND_ADDRESS=0.0.0.0
BASE_URL=https://api.ishswami.in
API_URL=https://api.ishswami.in
FRONTEND_URL=https://ishswami.in

# JWT Configuration (REQUIRED - must be set to secure secret)
JWT_SECRET=CHANGE_THIS_TO_A_SECURE_SECRET_IN_PRODUCTION
JWT_EXPIRATION=24h

# Prisma Configuration
PRISMA_SCHEMA_PATH=/app/src/libs/infrastructure/database/prisma/schema.prisma

# Logging Configuration
LOG_LEVEL=info
ENABLE_AUDIT_LOGS=true

# Rate Limiting Configuration (higher limits for production)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100
API_RATE_LIMIT=500
AUTH_RATE_LIMIT=30
HEAVY_RATE_LIMIT=50
USER_RATE_LIMIT=200
HEALTH_RATE_LIMIT=1000
MAX_AUTH_ATTEMPTS=10
AUTH_ATTEMPT_WINDOW=3600
MAX_CONCURRENT_SESSIONS=20
SESSION_INACTIVITY_THRESHOLD=1800

# Security Configuration
SECURITY_RATE_LIMIT=true
SECURITY_RATE_LIMIT_MAX=500
SECURITY_RATE_LIMIT_WINDOW_MS=30000
TRUST_PROXY=1

# Email Configuration
EMAIL_PROVIDER=api
EMAIL_HOST=live.smtp.mailtrap.io
EMAIL_PORT=2525
EMAIL_SECURE=false
EMAIL_USER=api
EMAIL_PASSWORD=
EMAIL_FROM=noreply@healthcare.com
MAILTRAP_API_TOKEN=

# CORS Configuration
CORS_ORIGIN=https://ishswami.in,https://api.ishswami.in,https://www.ishswami.in,https://meet.ishswami.in
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS

# Service URLs
SWAGGER_URL=/docs
BULL_BOARD_URL=/queue-dashboard
SOCKET_URL=/socket.io
REDIS_COMMANDER_URL=/redis-commander
PRISMA_STUDIO_URL=/prisma
PGADMIN_URL=/pgadmin

# WhatsApp Configuration
WHATSAPP_ENABLED=false
WHATSAPP_API_URL=https://graph.facebook.com/v17.0
WHATSAPP_API_KEY=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_BUSINESS_ACCOUNT_ID=
WHATSAPP_OTP_TEMPLATE_ID=otp_verification
WHATSAPP_APPOINTMENT_TEMPLATE_ID=appointment_reminder
WHATSAPP_PRESCRIPTION_TEMPLATE_ID=prescription_notification

# Jitsi Meet Configuration (Self-hosted)
# Update these with your production domain
JITSI_DOMAIN=meet.ishswami.in
JITSI_BASE_DOMAIN=ishswami.in
JITSI_SUBDOMAIN=meet
JITSI_APP_ID=healthcare-jitsi-app
JITSI_APP_SECRET=CHANGE_THIS_TO_A_SECURE_SECRET_IN_PRODUCTION
JITSI_BASE_URL=https://meet.ishswami.in
JITSI_WS_URL=wss://meet.ishswami.in/xmpp-websocket
VIDEO_ENABLED=true
JITSI_ENABLE_RECORDING=true
JITSI_ENABLE_WAITING_ROOM=true

# Google OAuth Configuration
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=https://api.ishswami.in/auth/google/callback

# Docker Configuration
DOCKER_ENV=true
DOCKER_NETWORK=app-network
