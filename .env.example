# ============================================================================
# ENVIRONMENT VARIABLES TEMPLATE
# ============================================================================
# Copy this file to .env and update with your values
# For environment-specific configs, create .env.development, .env.production, etc.
# ============================================================================

# Application Environment
NODE_ENV=development
IS_DEV=true

# Application Configuration
PORT=8088
API_PREFIX=/api/v1
HOST=0.0.0.0
BIND_ADDRESS=0.0.0.0
BASE_URL=http://localhost:8088
API_URL=http://localhost:8088
FRONTEND_URL=http://localhost:3000

# Database Configuration
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/userdb?connection_limit=50&pool_timeout=20
DIRECT_URL=postgresql://postgres:postgres@localhost:5432/userdb

# Database Security Configuration
DATABASE_SQL_INJECTION_PREVENTION_ENABLED=false
DATABASE_ROW_LEVEL_SECURITY_ENABLED=false
DATABASE_DATA_MASKING_ENABLED=false
DATABASE_RATE_LIMITING_ENABLED=false
DATABASE_READ_REPLICAS_ENABLED=false
DATABASE_READ_REPLICAS_STRATEGY=round-robin
DATABASE_READ_REPLICAS_URLS=

# Cache Configuration
CACHE_ENABLED=true
CACHE_PROVIDER=dragonfly

# Redis Configuration (for Redis provider)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_TTL=3600
REDIS_PREFIX=healthcare:
REDIS_PASSWORD=
REDIS_ENABLED=true

# Dragonfly Configuration (default provider)
DRAGONFLY_HOST=localhost
DRAGONFLY_PORT=6379
DRAGONFLY_KEY_PREFIX=healthcare:
DRAGONFLY_PASSWORD=

# JWT Configuration
JWT_SECRET=your-jwt-secret-key-min-32-chars
JWT_EXPIRATION=24h
JWT_ACCESS_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
JWT_REFRESH_SECRET=your-jwt-refresh-secret-key-min-32-chars

# Prisma Configuration
PRISMA_SCHEMA_PATH=./src/libs/infrastructure/database/prisma/schema.prisma

# Logging Configuration
LOG_LEVEL=debug
ENABLE_AUDIT_LOGS=true

# Rate Limiting Configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=100
API_RATE_LIMIT=100
AUTH_RATE_LIMIT=5
HEAVY_RATE_LIMIT=10
USER_RATE_LIMIT=50
HEALTH_RATE_LIMIT=200
MAX_AUTH_ATTEMPTS=5
AUTH_ATTEMPT_WINDOW=1800
MAX_CONCURRENT_SESSIONS=5
SESSION_INACTIVITY_THRESHOLD=900

# Security Configuration
SECURITY_RATE_LIMIT=true
SECURITY_RATE_LIMIT_MAX=1000
SECURITY_RATE_LIMIT_WINDOW_MS=15000
TRUST_PROXY=1

# Email Configuration
EMAIL_PROVIDER=api
EMAIL_HOST=live.smtp.mailtrap.io
EMAIL_PORT=2525
EMAIL_SECURE=false
EMAIL_USER=api
EMAIL_PASSWORD=your-email-password
EMAIL_FROM=noreply@healthcare.com
MAILTRAP_API_TOKEN=your-mailtrap-token

# CORS Configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:8088,http://localhost:5050,http://localhost:8082,http://localhost:8443
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS

# Service URLs
SWAGGER_URL=/docs
BULL_BOARD_URL=/queue-dashboard
SOCKET_URL=/socket.io
REDIS_COMMANDER_URL=http://localhost:8082
PRISMA_STUDIO_URL=http://localhost:5555
PGADMIN_URL=http://localhost:5050

# WhatsApp Configuration
WHATSAPP_ENABLED=false
WHATSAPP_API_URL=https://graph.facebook.com/v17.0
WHATSAPP_API_KEY=your-whatsapp-api-key
WHATSAPP_PHONE_NUMBER_ID=your-whatsapp-phone-number-id
WHATSAPP_BUSINESS_ACCOUNT_ID=your-whatsapp-business-account-id
WHATSAPP_OTP_TEMPLATE_ID=otp_verification
WHATSAPP_APPOINTMENT_TEMPLATE_ID=appointment_reminder
WHATSAPP_PRESCRIPTION_TEMPLATE_ID=prescription_notification

# Google OAuth Configuration
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_REDIRECT_URI=http://localhost:8088/auth/google/callback

# Video Configuration (Dual Provider: OpenVidu primary, Jitsi fallback)
VIDEO_ENABLED=true
VIDEO_PROVIDER=openvidu

# OpenVidu Configuration (Primary Video Provider)
OPENVIDU_URL=https://video.yourdomain.com
OPENVIDU_SECRET=your-openvidu-secret
OPENVIDU_DOMAIN=video.yourdomain.com
# OpenVidu Webhook Configuration (Optimized Architecture: Webhooks → Backend → Socket.IO)
# Enable webhooks to reduce Socket.IO load for video events
OPENVIDU_WEBHOOK_ENABLED=false
OPENVIDU_WEBHOOK_ENDPOINT=https://your-api.com/api/v1/webhooks/openvidu
OPENVIDU_WEBHOOK_EVENTS=sessionCreated,sessionDestroyed,participantJoined,participantLeft,recordingStarted,recordingStopped

# Jitsi Configuration (Fallback Video Provider)
JITSI_DOMAIN=localhost:8443
JITSI_BASE_DOMAIN=localhost
JITSI_SUBDOMAIN=localhost
JITSI_APP_ID=healthcare-jitsi-app
JITSI_APP_SECRET=dev-jitsi-secret-change-in-production
JITSI_BASE_URL=https://localhost:8443
JITSI_WS_URL=wss://localhost:8443/xmpp-websocket
JITSI_ENABLE_RECORDING=true
JITSI_ENABLE_WAITING_ROOM=true

# Session Configuration (Fastify Session with CacheService/Dragonfly)
# REQUIRED in production: SESSION_SECRET and COOKIE_SECRET must be set to secure secrets (minimum 32 characters)
SESSION_SECRET=your-session-secret-min-32-chars-long
SESSION_TIMEOUT=86400
SESSION_SECURE_COOKIES=false
SESSION_SAME_SITE=lax
COOKIE_SECRET=your-cookie-secret-min-32-chars

# AWS Configuration (for email/notifications via SES/SNS)
AWS_REGION=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_SES_FROM_EMAIL=
AWS_SES_FROM_NAME=
AWS_SNS_REGION=
AWS_SNS_IOS_PLATFORM_ARN=
AWS_SNS_ANDROID_PLATFORM_ARN=

# Firebase Configuration (for push notifications and chat)
FIREBASE_PROJECT_ID=
FIREBASE_PRIVATE_KEY=
FIREBASE_CLIENT_EMAIL=
FIREBASE_DATABASE_URL=

# Social Auth Configuration (Facebook, Apple)
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=
FACEBOOK_REDIRECT_URI=http://localhost:8088/auth/facebook/callback
APPLE_CLIENT_ID=
APPLE_CLIENT_SECRET=
APPLE_REDIRECT_URI=http://localhost:8088/auth/apple/callback

# S3 Storage Configuration (S3-compatible: Contabo, AWS, Wasabi, etc.)
S3_ENABLED=false
S3_PROVIDER=
S3_ENDPOINT=
S3_REGION=
S3_BUCKET=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_FORCE_PATH_STYLE=false
S3_PUBLIC_URL_EXPIRATION=3600
CDN_URL=

# Docker Configuration
DOCKER_ENV=false
DOCKER_NETWORK=app-network
