# ============================================================================
# DEVELOPMENT ENVIRONMENT CONFIGURATION
# ============================================================================
# Overrides .env for development environment
# ============================================================================

NODE_ENV=development
IS_DEV=true

# Database Configuration - Using local Docker Postgres
# In Docker: use container name 'postgres', locally: use 'localhost'
# Docker Compose will override this with the correct value
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/userdb?connection_limit=50&pool_timeout=20
DIRECT_URL=postgresql://postgres:postgres@postgres:5432/userdb

# Database Security Configuration (lenient for development)
DATABASE_SQL_INJECTION_PREVENTION_ENABLED=true
DATABASE_ROW_LEVEL_SECURITY_ENABLED=true
DATABASE_DATA_MASKING_ENABLED=true
DATABASE_RATE_LIMITING_ENABLED=true
DATABASE_READ_REPLICAS_ENABLED=false
DATABASE_READ_REPLICAS_STRATEGY=round-robin
DATABASE_READ_REPLICAS_URLS=

# Cache Configuration
CACHE_ENABLED=true
CACHE_PROVIDER=dragonfly

# Dragonfly Configuration (Primary Cache Provider - Docker-aware: use 'dragonfly' in Docker, 'localhost' locally)
DRAGONFLY_ENABLED=true
DRAGONFLY_HOST=dragonfly
DRAGONFLY_PORT=6379
DRAGONFLY_KEY_PREFIX=healthcare:

# Redis Configuration (for Redis provider)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_TTL=3600
REDIS_PREFIX=healthcare:
REDIS_ENABLED=true

# Application Configuration
PORT=8088
API_PREFIX=/api/v1
HOST=0.0.0.0
BIND_ADDRESS=0.0.0.0
BASE_URL=http://localhost:8088
API_URL=http://localhost:8088
FRONTEND_URL=http://localhost:3000

# JWT Configuration
JWT_SECRET=dev-jwt-secret-key
JWT_EXPIRATION=24h
JWT_ACCESS_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
JWT_REFRESH_SECRET=dev-jwt-refresh-secret-key

# Prisma Configuration
PRISMA_SCHEMA_PATH=/app/src/libs/infrastructure/database/prisma/schema.prisma

# Logging Configuration
LOG_LEVEL=debug
ENABLE_AUDIT_LOGS=true

# Rate Limiting Configuration
RATE_LIMIT_ENABLED=true
RATE_LIMIT_TTL=60
RATE_LIMIT_MAX=1000
API_RATE_LIMIT=100
AUTH_RATE_LIMIT=5
HEAVY_RATE_LIMIT=10
USER_RATE_LIMIT=50
HEALTH_RATE_LIMIT=200
MAX_AUTH_ATTEMPTS=5
AUTH_ATTEMPT_WINDOW=1800
MAX_CONCURRENT_SESSIONS=5
SESSION_INACTIVITY_THRESHOLD=900

# Security Configuration
SECURITY_RATE_LIMIT=true
SECURITY_RATE_LIMIT_MAX=1000
SECURITY_RATE_LIMIT_WINDOW_MS=15000
TRUST_PROXY=1

# Email Configuration
# EMAIL_PROVIDER controls legacy EmailService (when clinicId is not provided)
# Options: 'smtp' | 'api' (api = Mailtrap)
# Note: Multi-tenant system uses ProviderFactory with clinicId (ZeptoMail, SES, SMTP)
EMAIL_PROVIDER=zeptomail

# ZeptoMail Configuration (Primary Email Provider - Multi-Tenant System)
# ZeptoMail is Zoho's transactional email service
# Get your Send Mail Token from: Mail Agents >> SMTP/API >> Send Mail Token
# Documentation: https://www.zoho.com/zeptomail/help/api/email-sending.html
ZEPTOMAIL_ENABLED=true
# Send Mail Token (without "Zoho-enczapikey" prefix - it's added automatically)
# The adapter will automatically strip the prefix if included
ZEPTOMAIL_SEND_MAIL_TOKEN=PHtE6r0MRrrj2DEp9hYHs/a7H8GhMY54+rljf1UV5NwRDKRQGE1Wr9krxD7jrhd4UaZEFaTOz9putenNt7mFJjm4PW0eXWqyqK3sx/VYSPOZsbq6x00fsV8fckbdV4/mdtNu3SfWs9yX
# From email must be from a verified domain in your ZeptoMail Mail Agent
# IMPORTANT: Update this with your actual verified domain email
ZEPTOMAIL_FROM_EMAIL=noreply@viddhakarma.com
ZEPTOMAIL_FROM_NAME=Healthcare App
# Optional: Bounce address for handling bounces
ZEPTOMAIL_BOUNCE_ADDRESS=bounces@viddhakarma.com
# API Base URL (default: https://api.zeptomail.com/v1.1)
ZEPTOMAIL_API_BASE_URL=https://api.zeptomail.com/v1.1

# Clinic-Specific Credentials (Multi-Tenant Support)
# ===================================================
# Each clinic can have separate credentials using patterns:
# CLINIC_{CLINIC_NAME}_ZEPTOMAIL_SEND_MAIL_TOKEN
# CLINIC_{APP_NAME}_ZEPTOMAIL_SEND_MAIL_TOKEN
# CLINIC_{SUBDOMAIN}_ZEPTOMAIL_SEND_MAIL_TOKEN
#
# Example for clinic "Aadesh Ayurvedalay":
# CLINIC_AADESH_AYURVEDELAY_ZEPTOMAIL_SEND_MAIL_TOKEN=clinic_specific_token
# CLINIC_AADESH_AYURVEDELAY_ZEPTOMAIL_FROM_EMAIL=noreply@aadesh.com
# CLINIC_AADESH_AYURVEDELAY_WHATSAPP_API_KEY=clinic_whatsapp_key
# CLINIC_AADESH_AYURVEDELAY_SMS_API_KEY=clinic_sms_key
#
# Priority: Database config > Clinic-specific env vars > Global env vars

# CORS Configuration
CORS_ORIGIN=http://localhost:3000,http://localhost:8088,http://localhost:8082,http://localhost:8443
CORS_CREDENTIALS=true
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS

# Service URLs
SWAGGER_URL=/docs
BULL_BOARD_URL=/queue-dashboard
SOCKET_URL=/socket.io
REDIS_COMMANDER_URL=http://localhost:8082
PRISMA_STUDIO_URL=http://localhost:5555

# WhatsApp Configuration (optional - enable when ready)
# WhatsApp is integrated but disabled by default
# Set WHATSAPP_ENABLED=true and configure credentials to enable
WHATSAPP_ENABLED=false
WHATSAPP_API_URL=https://graph.facebook.com/v17.0
WHATSAPP_API_KEY=
WHATSAPP_PHONE_NUMBER_ID=
WHATSAPP_BUSINESS_ACCOUNT_ID=
WHATSAPP_OTP_TEMPLATE_ID=otp_verification
WHATSAPP_APPOINTMENT_TEMPLATE_ID=appointment_reminder
WHATSAPP_PRESCRIPTION_TEMPLATE_ID=prescription_notification

# Video Configuration (Dual Provider: OpenVidu primary, Jitsi fallback)
VIDEO_ENABLED=true
VIDEO_PROVIDER=openvidu

# OpenVidu Configuration (Primary - like Dragonfly in cache pattern)
OPENVIDU_URL=https://localhost:4443
OPENVIDU_SECRET=MY_SECRET
OPENVIDU_DOMAIN=localhost
# OpenVidu Webhook Configuration (Optimized Architecture: Webhooks → Backend → Socket.IO)
OPENVIDU_WEBHOOK_ENABLED=false
OPENVIDU_WEBHOOK_ENDPOINT=http://localhost:8088/api/v1/webhooks/openvidu
OPENVIDU_WEBHOOK_EVENTS=sessionCreated,sessionDestroyed,participantJoined,participantLeft,recordingStarted,recordingStopped

# Jitsi Configuration (Fallback - like Redis in cache pattern)
JITSI_DOMAIN=localhost:8443
JITSI_BASE_DOMAIN=localhost
JITSI_SUBDOMAIN=localhost
JITSI_APP_ID=healthcare-jitsi-app
JITSI_APP_SECRET=dev-jitsi-secret-change-in-production
JITSI_BASE_URL=https://localhost:8443
JITSI_WS_URL=wss://localhost:8443/xmpp-websocket
JITSI_ENABLE_RECORDING=true
JITSI_ENABLE_WAITING_ROOM=true

# Session Configuration (Fastify Session with CacheService/Dragonfly)
SESSION_SECRET=dev-session-secret-change-in-production-min-32-chars-long
SESSION_TIMEOUT=86400
SESSION_SECURE_COOKIES=false
SESSION_SAME_SITE=lax
COOKIE_SECRET=dev-cookie-secret-change-in-production-min-32-chars

# Firebase Configuration (REQUIRED for push notifications)
# Firebase is used as primary provider for push notifications
FIREBASE_PROJECT_ID=healthcare-dabe7
FIREBASE_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQCzOzA7WnhJZWEo\ntzapFdT0GVFL5ljqz2ousIFASG0cWv7iHON3ZdJ0L4v2g4XDxn/3jDosIc/swlw5\n22B3hbD7Z7RXZCHa52zouto9wFiY9Ji6faFudT1jMZh267MFd/7UZ55UD3FOtwDo\nAIg8Q2pSBuuGLKFrFTZ/Y84L3H1gAZUdVvbTVzTopclUm3OPuWbX0JZArpqctqFe\nD76CDkjaVDv6MndjtaxT5E+om5917tXBYAlFiOESsmuhUAI2lF0YH5ZWCvgLSG7c\nNCPog7o+fOKcIdrq3DqlxvmmCnxJ/NEM4SUYkGwvrE1p8BeMA65NMaOcDvZp/Ufy\n5mkj7Y/7AgMBAAECggEAAsL07RGic38OKtmLYZ3J1NyPAI4oezzTV8hgblYErbJH\nc/uMMFj9unc59/XyYMq8ZulepsEz8vHvQPT1sjcWAwKH0wnGJm6jTSuT2+3wGjJV\nRIpVq0/NzQCTEbPI47A8vOyi52/HQO87lFeKM5xkhvt33m61KnE3c/frCidNVXRx\nSCmqnF72dMr3alkIDuiR7epFNSbSJQi24fOfzhm9Z8EfNgGL+Z5DCEnZdaAcFwZJ\n6gAX0kGCjaOcsNfr05/WIEJDhQrLqs/81qOf7lPo2vOOX5oh6et0pavK+IOnGUtx\nUYaQHEX4w0Juk40gppXr2s/KS3I0pKJo+mvZnMiQAQKBgQDlYlUbVSjyqr2WJy4C\nbpl5QT8EB+tUKY3Ti3y0nFnthtTGT/Gixs+8Dvt00aJifhToaWVz7qLBHnQ0Z22L\nrfGxsK27hoIewyNieMKaRUYtO58szIXl+vEcDjmRNC96uxDrJ1vRnZv0CeyeYMqm\nrKjGiThfH459mqmkl+A7/7rxsQKBgQDIBxrYKNLzUWCZCpwn57nbRJo+iYtXRn2r\nkbamThoAznZ7hRp4F5lEPgnDiUetMAl2vDPPyUQBEjqyCkr4HR1+Tzu2tHf+K3/0\nLFcVT8mznB0mIxYp/o6jQ5weVrYlfLMfdDLiFc6vf04XbzFyL0Qzv6tabSnqAV6c\nC9QG5XL7awKBgGLSLCwsUgnJeQfZNT8i+sd8TnOkHcQSauF6NG1y9mMYNU6CXm1s\nDU7NfZNkRPr9qnA+B9EcO83LGvEApfcJJxkQLqidWC18kB/6OoxPz93o07hvHDhq\nFbmqfy6JNvM+6BkGyc3Sgr9uDxxkQqnvtH5j239PjwmZugAI1jfDAnzhAoGBAKcy\n8Shwb2x9wE4MxVzB4OQ84uWVWUj5nkBUi6VVsXytF/LF3ss1hqK5bLXqwWQtvCto\nw7JTHSn8D94Upnfg9m9HUbW2AnsN52W1zpD84a/ltaPUPkmaA6bK8+uUNar+IkgP\nfBzpd5vQwPjrtBwrEEplU5lBmICG5otvg6rEDqnDAoGBAJRYYqrlGkt8+KKCv7L5\na3KJIgIYI8SG/s9182HIPZltoT6BorB/92UHKpasAR6zggSc0Q6Ji9XYMO+uIQ3L\nys7IYakhEqilY1gYyAD1W+XBMUJrjV3bzz0s8wHoIvgMzLcsO2y8fcXbx6JwrXU+\nuYnb6QvnJddANXa7ANrrLb/o\n-----END PRIVATE KEY-----\n"
FIREBASE_CLIENT_EMAIL=firebase-adminsdk-fbsvc@healthcare-dabe7.iam.gserviceaccount.com
FIREBASE_DATABASE_URL=
FIREBASE_VAPID_KEY=BJEpiaccGsTJJOJZjIq21hJ1EV7_xg5rTL8DbmJ6lMz9_6lupM5G4jk14IMuYqLszQlqd_vwJgDY0g-uiO9jRmw

# Mailtrap Configuration (Optional - Legacy EmailService / Development Only)
# Mailtrap is used by legacy EmailService when EMAIL_PROVIDER=api and clinicId is not provided
# For multi-tenant system, use ZeptoMail or AWS SES via ProviderFactory
# Get your API token from: https://mailtrap.io/api-tokens
MAILTRAP_API_TOKEN=

# SMTP Configuration (Optional - Legacy EmailService / Development Only)
# SMTP is used by legacy EmailService when EMAIL_PROVIDER=smtp and clinicId is not provided
# For multi-tenant system, use SMTP adapter via ProviderFactory
EMAIL_HOST=live.smtp.mailtrap.io
EMAIL_PORT=2525
EMAIL_SECURE=false
EMAIL_USER=api
EMAIL_PASSWORD=
EMAIL_FROM=noreply@healthcare.com

# AWS Configuration (for SNS push notifications fallback and SES email)
# AWS SNS is used as fallback when FCM fails for push notifications
# AWS SES is available as email provider (can be configured per-clinic)
AWS_REGION=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_SNS_REGION=
AWS_SNS_IOS_PLATFORM_ARN=
AWS_SNS_ANDROID_PLATFORM_ARN=

# AWS SES Configuration (Optional - Available as Email Provider)
# AWS SES can be configured per-clinic as primary or fallback email provider
# Currently using ZeptoMail as primary email provider
# To use AWS SES: Configure per-clinic via CommunicationConfigService
AWS_SES_FROM_EMAIL=
AWS_SES_FROM_NAME=
AWS_SES_REGION=

# Google OAuth Configuration (optional - configure when needed)
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=
GOOGLE_REDIRECT_URI=http://localhost:8088/auth/google/callback

# Social Auth Configuration (optional - configure when needed)
FACEBOOK_APP_ID=
FACEBOOK_APP_SECRET=
FACEBOOK_REDIRECT_URI=http://localhost:8088/auth/facebook/callback
APPLE_CLIENT_ID=
APPLE_CLIENT_SECRET=
APPLE_REDIRECT_URI=http://localhost:8088/auth/apple/callback

# S3 Storage Configuration (optional - enable when you need file storage)
S3_ENABLED=false
S3_PROVIDER=
S3_ENDPOINT=
S3_REGION=
S3_BUCKET=
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_FORCE_PATH_STYLE=false
S3_PUBLIC_URL_EXPIRATION=3600
CDN_URL=

# Redis/Dragonfly Password (if password-protected)
REDIS_PASSWORD=
DRAGONFLY_PASSWORD=

# Docker Configuration
DOCKER_ENV=true
DOCKER_NETWORK=app-network
