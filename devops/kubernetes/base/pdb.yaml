# PodDisruptionBudget for API - Ensures high availability during updates
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: healthcare-api-pdb
  namespace: healthcare-backend
spec:
  minAvailable: 2  # Always keep at least 2 pods running
  selector:
    matchLabels:
      app: healthcare-api
---
# PodDisruptionBudget for Worker - Ensures job processing continuity
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: healthcare-worker-pdb
  namespace: healthcare-backend
spec:
  minAvailable: 1  # Always keep at least 1 worker running
  selector:
    matchLabels:
      app: healthcare-worker
---
# PodDisruptionBudget for Redis - Protect cache during maintenance
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: redis-pdb
  namespace: healthcare-backend
spec:
  minAvailable: 2  # Keep majority of Redis nodes running
  selector:
    matchLabels:
      app: redis
---
# PodDisruptionBudget for PostgreSQL - Critical data protection
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: postgres-pdb
  namespace: healthcare-backend
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app: postgres
