# Dynamic Resource Quota - Scales with Cluster Resources
# Values are calculated based on cluster tier and node count
# Updated automatically by upgrade scripts

apiVersion: v1
kind: ResourceQuota
metadata:
  name: healthcare-quotas
  namespace: healthcare-backend
  labels:
    app: healthcare-backend
    config: dynamic
spec:
  hard:
    # These values will be updated by the upgrade script
    # Formula: requests.cpu = Total vCPU × 0.67 (67% of total)
    # Formula: requests.memory = Total RAM × 0.67 (67% of total)
    # Formula: limits.cpu = Total vCPU (100% of total)
    # Formula: limits.memory = Total RAM (100% of total)
    # Formula: pods = (Total vCPU / 2) × 10 (reasonable limit)
    
    requests.cpu: "8"         # Will be updated: Total vCPU × 0.67 (12 × 0.67 = 8 for VPS 10)
    requests.memory: 16Gi     # Will be updated: Total RAM × 0.67 (24 × 0.67 = 16 for VPS 10)
    limits.cpu: "12"          # Will be updated: Total vCPU (12 for VPS 10)
    limits.memory: 24Gi       # Will be updated: Total RAM (24GB for VPS 10)
    pods: "60"                # Will be updated: (Total vCPU / 2) × 10 (12/2 × 10 = 60 for VPS 10)

